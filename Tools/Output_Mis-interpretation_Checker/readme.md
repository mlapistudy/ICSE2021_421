# README

This folder includes Output Mis-interpretation Checker. It will reproduce the data in the third paragraph of Section VII ("Among the 975 GitHub Python applications that use this API, our checker finds 360 of them interpreting the API output incorrectly.") and the second row in Table III ("360 (37%)").

1. [Package dependencies](#depend)
2. [Credentials](#credentials)
3. [File description](#file)
4. [Usage](#usage)
5. [Reproduce results in our paper](#reproduce)



## Package dependency <a name="depend"></a>

Ruby 2.4 or higher. octokit package 4.18.0 or higher.

Python 3.6 or higher. jedi package 0.17.0 or higher.



## Credentials <a name="credentials"></a>

Github requires login to do search.

Please change line `client = Octokit::Client.new(:access_token => "your-token")` to your [OAuth access tokens](http://developer.github.com/v3/oauth/) in all ruby files (`search_repo.rb ` and `search_inside_repo.rb`). 



## File description <a name="file"></a>

1. `codes_subset` folder and `test.txt` includes some test data.

2. `codes` folder includes all related code files. It will be generated during the execution.
3. `python_apps.txt` and `repo_list_language.txt` are the repo list used in this checker. `repo_list_language.txt` are all Github applications using google language API by August 2020. `python_apps.txt` is generated during execution, which contains python applications using `analyze_sentiment` API.
4. `analyze_result.txt` is the final result generated by our tool. It will be generated after the execution. The format is `[USERNAME/REPO] \t [# of fields used]`. An repo is regarded as correct only when the second column equals to 2. Negative value refers to an execution error.

5. `result_in_paper.txt` is the final result used in our paper, which is obtained at August 2020. The result obtained by our tool may differ between two execution, as GitHub repositories might be created, updated, and deleted during these process. For the unchanged repositores, our tools will always provide same result.





## Usage <a name="usage"></a>

1. `ruby search_repo.rb` to get repo list and download related files. Its input is `repo_list_language.txt` and output is `python_apps.txt`, which are already included in the folder.
2. `python check_usage_pre.py` to download extra files for next step. The code are stored in `codes` file. Variable `TIME_LIMIT` sets time limit for each repo (0 for no limit).
3. `python check_usage.py` to do further checking. Variable `TIME_LIMIT` sets time limit for each repo. negative number refers to timeout or other failure. Variable `TIME_LIMIT` sets time limit for each repo.



## Reproduce results in our paper <a name="reproduce"></a>

Our paper's results related to these tools, contained in section VII, were obtained using the crawled repo lists in Aug. 2020. 

The `ruby search_repo.rb`, `python check_usage_pre.py` and `python check_usage.py` were ran in Aug. 2020. If one runs these static analyzers on the same repo list ( `repo_list_language.txt`) again in a later date, some minor discrepencies might be observed due to projects being taken down or modified. Thus, we include the final output of this tool as in `result_in_paper.txt` . 

To reproduce the results of our paper, one can check the second column in  `result_in_paper.txt` , in which 2 refers to no mis-use, and 1,0 refers to mis-use.
